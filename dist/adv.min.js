
        import{micromark as e}from"https://esm.sh/micromark@3?bundle";import{directive as n,directiveHtml as t}from"https://esm.sh/micromark-extension-directive@3?bundle";var o={};let a=(e,n,t)=>{},i=(e,n,t)=>{},s=(e,n,t)=>{},r=e=>{},c=e=>{},l=(e,n)=>{},d=e=>{},p=e=>{},u=()=>{},h=e=>{},m=e=>"",g=(e,n)=>{},f=(e,n)=>{},y=e=>{};!function(){let s=[],r={page:"",topics:[]};const c={},l={};let d=()=>{},p={},u=void 0,g="",f={},y={},w={},v="",k=[],I=[];function $(e){return e.replace(/ /g,"")}function Y(e){const n=m();return`${r.page??"default"}-${n}`}function E(e){const n=m();return`${r.page??"default"}-${n}${g?"-"+g:""}`}function T(o){o=o.split("\n").map(e=>e.trim()).join("\n");const a=document.createElement("div");a.className="pr";const i=e(o,{extensions:[n()],htmlExtensions:[t({dropcap:function(e){const n=e.content.replace("<p>","").replace("</p>","");this.tag('<div class="drop-cap">'),this.tag(n),this.tag("</div>")},aside:function(e){const n=e.content.replace("<p>","").replace("</p>","");this.tag('<div class="tip">'),this.tag(n),this.tag("</div>")},kbd:function(e){const n=e.label;this.tag("<kbd>"),this.tag(n),this.tag("</kbd>")},heading:function(e){const n=e.content.replace("<p>","").replace("</p>","");this.tag('<div class="heading">'),this.tag(n),this.tag("</div>")},topics:function(e){const n=function(){const e=[...r.topics.map(e=>{if(f[e])return`<kbd>${e}</kbd>`}).filter(e=>e)];if(1===r.topics.length)return`You might talk\n            about ${e.pop()}.`;if(2===r.topics.length){const n=e.pop();return`You might talk \n            about ${e.pop()} or ${n}`}if(r.topics.length>2){const n=e.pop();return`You might\n            discuss ${e.join(", ")} or ${n}.`}return""}();n&&(this.tag('<div class="tip">'),this.tag(n),this.tag("</div>"))},restricted:function(e){const n=function(){const e=[...I.map(e=>{if(f[e])return`<kbd>${e}</kbd>`}).filter(e=>e)];if(1===I.length)return`You can type ${e.pop()}.`;if(2===I.length){const n=e.pop();return`You can type ${e.pop()} or ${n}`}if(I.length>2){const n=e.pop();return`You can type ${e.join(", ")} or ${n}.`}return""}();n&&(this.tag('<div class="tip">'),this.tag(n),this.tag("</div>"))}})]});a.innerHTML=i,s.push(a)}function P(){const e=document.getElementById("output"),n=document.getElementById("preview"),t=document.createElement("div");t.className="main",t.append(...s),s=[],n.innerHTML="",e.append(t);const o=t.getBoundingClientRect();window.scrollTo(0,o.top+window.scrollY)}function x(e){e.preventDefault();const n=document.getElementById("command-line"),t=n.value.trim().toLowerCase();if(f[t]){const[e,o]=f[t];g=t;let a=o();u&&(a=u);const i=(()=>{const e=E();if(l[e]&&-1!==l[e]){const n=l[e]();return l[e]=-1,n}})();if(i&&(a=i),u=void 0,function(){const e=Y();return!(!c[e]||!c[e].callback)}()){const e=Y();if(c[e].cmds.indexOf(t)>-1){a=(e=>`\n\n${c[e].callback()}\n\n`)(e)+a,c[e].callback=!1}}if(I.length>0){const e={...f};f={},I.map(n=>f[n]=e[n])}T(((e,n)=>`            \n\n:::heading\n${e}\n:::\n${n}\n\n`)(e,a)),P(),g="",n.value=""}return n.focus(),!1}e=>{r.chapter=e},m=e=>{const n=e||r.page;return p[n]??"default"},(e,n)=>{const t=n||r.page;p[t]=e},(e,n)=>{e===m()&&(u=n())},i=(e,n,t)=>{const o=$(e.toLowerCase().trim());y[o]=[n,t]},a=(e,n,t)=>{const o=$(e.toLowerCase().trim());f[o]=[n,t]},(e,n,t)=>{const o=$(e.toLowerCase().trim());w[o]=[n,t]},e=>{I=[...e]},e=>{const n=E();l[n]||(l[n]=e)},e=>{const n=new Set([...r.topics,e]);r.topics=[...n]},e=>{k=[e,void 0]},h=e=>{let n="";f={...y},d=o[e],r.page=e,n=d();const t=k.pop();return t?t()+n:n},(e,n)=>{const t=Y();c[t]||(c[t]={cmds:[...n],callback:e})},()=>r,addEventListener("load",()=>{document.title=b.title,i("help","Help",()=>o[b.helpPage]()),function(){const e=document.getElementById("output"),n=document.getElementById("entry-form");e&&(e.innerHTML=""),n&&(n.onsubmit=x)}(),function e(){const n=document.getElementById("preview"),t=document.getElementById("command-line").value;if(f[t]){const e=f[t][0];if(e&&v!==e){n.innerText="";const t=document.createElement("div");v=e,t.className="preview-content",t.append(e),n.append(t)}}else n.innerText="",v="";setTimeout(()=>{e()},100)}(),T(h(b.firstPage)),P()}),addEventListener("keyup",e=>{const n=document.getElementById("command-line"),t=e.key.toLowerCase();"arrowup"===t?window.scrollTo(0,window.scrollY-50):"arrowdown"===t?window.scrollTo(0,window.scrollY+50):n&&document.activeElement!==n&&("abcdefghijklmonpqrstuvwxyz".indexOf(t)>-1&&(n.value+=t),n.focus())})}(),o.title=()=>"\n\n# Arrr!\n### a game by spacflounder\n\n:::dropcap\nYou present an interesting case,” said I with no small hint of delight.\n“You believe, with the most dire sincerity, that you are in fact hunted\nby none other than Anubis himself?”\n:::\n\n“With all my soul!” said Barstow. “The priests won’t help me, and I dare not\ngo to Scotland Yard. Please, Madame Soo, I gravely require you to shed\nsome light on this darkness I find myself ensconced in.”\n\n",o.intro=()=>(a("start","I’ve played before",()=>h("inJail")),a("barter","Can we make a deal?",()=>h("prologue")),a("beach","Time to sleep on the beach",()=>h("beach_prologue")),"\n:::dropcap\nThere’s nought a free room or bed in the whole village,” said the innkeeper.\nHe was a stocky fellow, with a fatuous nose and a mustache to match.\n:::\n\n“Please,” said I, “Anything you can spare, just for one night.”\n\n“Ye might try down on the beach. Pebbles sleeps there all day.”\n\n:::aside\nYe might type :kbd[barter], :kbd[beach] or,\nif you‘ve played before, type :kbd[start].\n:::\n\n");const b={title:"Arrr!",author:"spaceflounder",email:"spaceflounder@hotmail.com",firstPage:"intro",helpPage:"helpPage"};o.helpPage=()=>"\n\n:::dropcap\nArrr! is a one-word parser game. This means you can control the game story\nby entering single word commands. Each turn, the game will present you with\ntext of what’s currently happening in the story.\n:::\n\nWhat commands the game understands depends on context. If you’re talking to\na character, you might try entering a topic. You can type a location to make\nthe player character go there (if that’s possible!) Other commands may be\nsuggested. If the game can understand the command you’ve typed, a little\npreview message will appear. Press Enter to send the command to the game\nand see what happens next!\n\n    ",o.beach_prologue=()=>"\n\n“You are likely correct,” said I with no small level of indignation.\n“But rather than stay here, sir, I shall find for myself a bed of sand. And\nif I shall perish from some unscrupulous blade, I shall thank you not to \ndarken my grave with your presence!”\n\nThe piggish innkeeper only snorted in response.\n\n    ",o.prologue=()=>(a("pay","Your money, sir.",()=>h("tinyInnRoom")),a("beach","Time to sleep on the beach",()=>h("beach_prologue")),"\n\n“*Anything* will do,” I said with no small measure of desperation. “Please,\nyou can’t just send me away.” Already I could envision the spectres of brigands\nand ne’re-do-wells lurking in the dark. “I will offer double your usual sum.”\n\nThe innkeeper gave a wicked little smile. “Perhaps I can help you, friend.”\n\n:::aside\nYou’ve likely noticed this is a one word parser game. Type :kbd[pay] to settle\nyour account for the night, or type :kbd[beach] to spend the night on the \nbeach.\n:::\n\n");
    