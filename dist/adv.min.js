
        import{micromark as e}from"https://esm.sh/micromark@3?bundle";import{directive as n,directiveHtml as t}from"https://esm.sh/micromark-extension-directive@3?bundle";var o={};let i=(e,n,t)=>{},a=(e,n,t)=>{},s=e=>{},r=e=>{},c=(e,n)=>{},l=e=>{},d=e=>{},u=()=>{},p=e=>{},h=e=>"",m=(e,n)=>{},f=e=>{};!function(){let a=[],s={page:"",topics:[]};const r={},c={};let l=()=>{},d={},u="",m={},f={},b="",y=[],w=[];function k(e){return e.replace(/ /g,"")}function v(e){const n=h();return`${s.page??"default"}-${n}`}function I(e){const n=h();return`${s.page??"default"}-${n}${u?"-"+u:""}`}function $(o){o=o.split("\n").map(e=>e.trim()).join("\n");const i=document.createElement("div");i.className="pr";const r=e(o,{extensions:[n()],htmlExtensions:[t({dropcap:function(e){const n=e.content.replace("<p>","").replace("</p>","");this.tag('<div class="drop-cap">'),this.tag(n),this.tag("</div>")},aside:function(e){const n=e.content.replace("<p>","").replace("</p>","");this.tag("<aside>"),this.tag(n),this.tag("</aside>")},kbd:function(e){const n=e.label;this.tag("<kbd>"),this.tag(n),this.tag("</kbd>")},topics:function(e){const n=function(){const e=[...s.topics.map(e=>{if(m[e])return`<kbd>${e}</kbd>`}).filter(e=>e)];if(1===s.topics.length)return`You might talk\n            about ${e.pop()}.`;if(2===s.topics.length){const n=e.pop();return`You might talk \n            about ${e.pop()} or ${n}`}if(s.topics.length>2){const n=e.pop();return`You might\n            discuss ${e.join(", ")} or ${n}.`}return""}();n&&(this.tag("<aside>"),this.tag(n),this.tag("</aside>"))},restricted:function(e){const n=function(){const e=[...w.map(e=>{if(m[e])return`<kbd>${e}</kbd>`}).filter(e=>e)];if(1===w.length)return`You can type ${e.pop()}.`;if(2===w.length){const n=e.pop();return`You can type ${e.pop()} or ${n}`}if(w.length>2){const n=e.pop();return`You can type ${e.join(", ")} or ${n}.`}return""}();n&&(this.tag("<aside>"),this.tag(n),this.tag("</aside>"))}})]});i.innerHTML=r,a.push(i)}function Y(){const e=document.getElementById("output"),n=document.getElementById("preview"),t=document.createElement("div");t.className="response",t.append(...a),a=[],n.innerHTML="",e.append(t);const o=t.getBoundingClientRect();window.scrollTo(0,o.top+window.scrollY)}function E(e){e.preventDefault();const n=document.getElementById("command-line"),t=n.value.trim().toLowerCase();if(m[t]){const[e,o]=m[t];u=t;let i=o();const a=(()=>{const e=I();if(c[e]&&-1!==c[e]){const n=c[e]();return c[e]=-1,n}})();if(a&&(i=a),function(){const e=v();return!(!r[e]||!r[e].callback)}()){const e=v();if(r[e].cmds.indexOf(t)>-1){i=(e=>`\n\n${r[e].callback()}\n\n`)(e)+i,r[e].callback=!1}}if(w.length>0){const e={...m};m={},w.map(n=>m[n]=e[n])}$(((e,n)=>`\n\n### ${e}            \n\n${n}\n\n`)(e,i)),Y(),u="",n.value=""}return n.focus(),!1}e=>{s.chapter=e},h=e=>{const n=e||s.page;return d[n]??"default"},(e,n)=>{const t=n||s.page;d[t]=e},i=(e,n,t)=>{const o=k(e.toLowerCase().trim());m[o]=[n,t]},(e,n,t)=>{const o=k(e.toLowerCase().trim());f[o]=[n,t]},e=>{w=[...e]},e=>{const n=I();c[n]||(c[n]=e)},e=>{const n=new Set([...s.topics,e]);s.topics=[...n]},e=>{y=[e,void 0]},p=e=>{let n="";m={},l=o[e],s.page=e,n=l();const t=y.pop();return t?t()+n:n},(e,n)=>{const t=v();r[t]||(r[t]={cmds:[...n],callback:e})},()=>s,addEventListener("load",()=>{document.title=g.title,function(){const e=document.getElementById("output"),n=document.getElementById("input");e&&(e.innerHTML=""),n&&(n.onsubmit=E)}(),function e(){const n=document.getElementById("preview"),t=document.getElementById("command-line").value;if(m[t]){const e=m[t][0];if(e&&b!==e){n.innerText="";const t=document.createElement("div");b=e,t.className="preview-content",t.append(e),n.append(t)}}else n.innerText="",b="";setTimeout(()=>{e()},100)}(),$(p(g.firstPage)),Y()}),addEventListener("keyup",e=>{const n=document.getElementById("command-line"),t=e.key.toLowerCase();"arrowup"===t?window.scrollTo(0,window.scrollY-50):"arrowdown"===t?window.scrollTo(0,window.scrollY+50):n&&document.activeElement!==n&&("abcdefghijklmonpqrstuvwxyz".indexOf(t)>-1&&(n.value+=t),n.focus())})}();const g={title:"Arrr!",author:"spaceflounder",email:"spaceflounder@hotmail.com",firstPage:"intro"};o.title=()=>"\n\n# Arrr!\n### a game by spacflounder\n\n:::dropcap\nYou present an interesting case,” said I with no small hint of delight.\n“You believe, with the most dire sincerity, that you are in fact hunted\nby none other than Anubis himself?”\n:::\n\n“With all my soul!” said Barstow. “The priests won’t help me, and I dare not\ngo to Scotland Yard. Please, Madame Soo, I gravely require you to shed\nsome light on this darkness I find myself ensconced in.”\n\n",o.beach_prologue=()=>"\n\n“You are likely correct,” said I with no small level of indignation.\n“But rather than stay here, sir, I shall find for myself a bed of sand.”\n\n    ",o.intro=()=>(i("start","I’ve played before",()=>p("inJail")),i("barter","Can we make a deal?",()=>p("prologue")),i("beach","Time to sleep on the beach",()=>p("beach_prologue")),"\n\n### One Night in the Caribbean\n\n:::dropcap\nThere’s nought a free room or bed in the whole village,” said the innkeeper.\nHe was a stocky fellow, with a fatuous nose and a mustache to match.\n:::\n\n“Please,” said I, “Anything you can spare, just for one night.”\n\n“Ye might try down on the beach. Pebbles sleeps there all day.”\n\n:::aside\nYe might type :kbd[barter], :kbd[beach] or,\nif you‘ve played before, type :kbd[start].\n:::\n\n"),o.prologue=()=>(i("pay","Your money, sir.",()=>p("tinyInnRoom")),i("beach","Time to sleep on the beach",()=>p("beach_prologue")),"\n\n“*Anything* will do,” I said with no small measure of desperation. “Please,\nyou can’t just send me away.” Already I could envision the spectres of brigands\nand ne’re-do-wells lurking in the dark. “I will offer double your usual sum.”\n\nThe innkeeper gave a wicked little smile. “Perhaps I can help you, friend.”\n\n:::aside\nYou’ve likely noticed this is a one word parser game. Type :kbd[pay] to settle\nyour account for the night, or type :kbd[beach] to spend the night on the \nbeach.\n:::\n\n");
    